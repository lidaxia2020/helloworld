# http权威指南
### Web基础
#### 1.Http概述
- 媒体类型(MIME type):是一种文本标记，表示一种主要的对象类型和一个特定的子类型，中间由一条斜杠来分隔
- URL(统一资源定位符):有2种形式，分别称为URL和URN
    - URL:描述了一台特定服务器上某资源的特定位置.一般包含三个部分:
        - URL的第一部分被称为方案(scheme),说明了访问资源所使用的额协议类型
        - 第二部分是服务器的因特网地址
        - 其余部分指定了Web服务器上的某个资源
    - URN:作为特定内容的唯一名称使用，与目前的资源所在地无关.
- 事务
    - 方法
    - 状态码
- 报文
- 连接
    - a)浏览器从URL中解析出服务器的主机名
    - b)浏览器将服务器的主机名转换成服务器的IP地址
    - c)浏览器将端口号从URL中解析出来
    - d)浏览器建立一条与web服务器的TCP连接
    - e)浏览器像服务器发送一条HTTP请求报文
    - f)服务器向浏览器发送一条HTTP响应报文
    - g)关闭连接，浏览器显示文档
- web的结构化组件
    - 代理
    - 缓存
    - 网关
    - 隧道：建立起来之后，就会再2条连接之间对原始数据进行盲转发的HTTP应用程序
    - Agent代理
    

#### 2.URL与资源
- URL语法格式： 
~~~~
<scheme>://<user>:<password>@<host>:<port>/<path>;<params>?<query>#<frag>
~~~~



#### 3.Http报文
- 报文流：Http报文是http应用程序之间发送得数据块。这些数据块以一些文本得形式元信息开头，这些信息描述了报文的内容及含义。术语“流入”“流出”“上游”“下游”都是用来描述报文方向的。
- 报文格式
~~~~
请求报文：
    <method> <request-URL> <version>
    <entity-body>
响应报文：
    <version> <status> <reason-phrase>
    <status>
    <entity-body>
方法（method）:客户端希望服务器对资源执行的动作。
请求URL(request-URL):命名了所有请求资源，或者URL路径组件的完整URL.
版本(version):报文所使用的http版本。格式：HTTP/<major>.<minor>
状态码(status-code):这三位数字描述了请求过程中所发生的情况。
原因短语(reason-phrase):数字状态码的可读版本，包含行终止序列之前的所有文本。
首部(header):可以有0个或多个首部。每个名字后面都跟着一个冒号(:),然后是一个可选的空格，接着是一个值，最后是一个CRLF。
实体的主体部分(entity-body):实体的主体部分包含一个由任意数据组成的数据块。
~~~~
- 状态码
    - 100-199 信息状态码
    - 200-299 成功状态码
    - 300-399 重定向状态码
    - 400-499 客户端错误状态码
    - 500-599 服务器错误状态码
- 首部
    - 通用首部
    - 请求首部
    - 响应首部
    - 实体首部
    - 扩展首部
    
    
    
#### 4.连接管理
- Tcp连接
    - Tcp的可靠数据管道
    - Tcp流是分段的由IP分组传送
    - 保持TCP连接正确运行
    - 用TCP套接字编程
- 对TCP性能的考虑
    - Http事务的时延
        - 客户端首先需要根据URI确定Web服务器的IP地址和端口号。如果最近没有对URI中的主机名进行访问，通过DNS解析系统将URI中的主机名转换成一个IP地址可能需要花费数十秒的时间。
        - 接下来，客户端会向服务器发送一条TCP连接请求，并等待服务器回送一个请求接受应答。每条新的TCP连接都会建立时延。这个值通常最多只有1，2秒钟，但如果有数百个Http事务的话，这个值会快速叠加上去。
        - 一旦连接建立起来了，客户端就会通过新建立的TCP管道来发送Http请求。数据到达时，Web服务器会从TCP连接中读取请求报文，并对请求进行处理。
        - 然后，web服务器会回送Http响应，这也需要花费时间。
    - 性能聚焦区域
        - Tcp连接建立握手
        - Tcp慢启动拥塞控制
        - 数据聚集的Nagle算法
        - 用于捎带确认的Tcp延迟确认算法
        - Time_wait时延和端口耗尽
    - TCP连接的握手时延
        - 4.2.3
        
        
        
#### 5.Web服务器
#### 6.代理
#### 7.缓存
#### 8.集成点：网关、隧道及中继
#### 9.Web机器人
#### 10.Http-NG
#### 11.客户端识别与cookie机制
#### 12.基本认证机制
#### 13.摘要机制
#### 14.安全Http
